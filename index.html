<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="ca">
<head>
	<meta charset="utf-8"/>
	<meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>
	<!--@@ Título a modificar -->
	<title>OpenStreetMap POIs Map</title>
	<!--@@ Título a modificar para la descripción -->
	<meta content="OpenStreetMap POIs Map" name="description"/>

	<link rel="stylesheet" href="src/api/jquery-ui-1.12.1.custom/jquery-ui.min.css" type="text/css"/>
	<link rel="stylesheet" href="src/api/openlayers/v6.2.2-custom/ol.css" type="text/css"/>
	<link rel="stylesheet" href="src/css/font-awesome.css" type="text/css"/>
	<link rel="stylesheet" href="src/css/index.css" type="text/css"/>
	
	<link rel="icon" href="favicon.ico"/>
  <script src="src/translations/i18n.js"></script>
  <script>
    // Language selector
    function setLanguage(lang) {
      loadTranslations(lang, function() {
        // Optionally, trigger a UI refresh
        if (typeof updateUIWithTranslations === 'function') updateUIWithTranslations();
      });
      localStorage.setItem('lang', lang);
    }
    // On load, set language from localStorage or browser
    var userLang = localStorage.getItem('lang') || (navigator.language || navigator.userLanguage || 'en').substring(0,2);
    if (!['en','es','ca'].includes(userLang)) userLang = 'en';
    loadTranslations(userLang);
  </script>
  <style>
    .lang-selector { position:absolute; top:10px; right:10px; z-index:1000; }
  </style>
</head>
<body>
  <div class="lang-selector">
    <select onchange="setLanguage(this.value)">
      <option value="en">English</option>
      <option value="es">Español</option>
      <option value="ca">Català</option>
    </select>
  </div>
	<style>
#language-bar {
  position: fixed;
  top: 10px;
  right: 16px;
  z-index: 10000;
  background: rgba(255,255,255,0.95);
  padding: 4px 8px;
  border-radius: 6px;
  box-shadow: 0 2px 8px rgba(0,0,0,0.08);
  display: flex;
  align-items: center;
  gap: 4px;
}
#language-bar label {
  font-size: 1.2em;
  font-weight: bold;
  margin-right: 2px;
}
#language-bar select {
  font-size: 1em;
  padding: 2px 6px;
  border-radius: 4px;
  border: 1px solid #ccc;
  background: #fff;
}
html, body {
  height: 100vh;
  width: 100vw;
  margin: 0;
  padding: 0;
  overflow: hidden;
}
.flex-row {
  display: flex;
  flex-direction: row;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
}
#menu {
  min-width: 200px;
  max-width: 600px;
  width: 320px;
  height: 100vh;
  box-sizing: border-box;
  overflow-y: auto;
  z-index: 2;
}
#menu-resizer {
  width: 6px;
  cursor: ew-resize;
  background: #eee;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  z-index: 3;
}
#map {
  flex: 1 1 0%;
  height: 100vh;
  min-width: 0;
  position: relative;
}
</style>
<div id="language-bar">
  <label for="language-selector">🌐</label>
  <select id="language-selector">
    <option value="en">English</option>
    <option value="es">Español</option>
    <option value="ca">Català</option>
  </select>
</div>
  <label for="language-selector">🌐</label>
  <select id="language-selector">
    <option value="en">English</option>
    <option value="es">Español</option>
    <option value="ca">Català</option>
  </select>
</div>
<div class="flex-row">
  <div id="menu" class="osmcat-menu">
    <div id="legend"><h3 id="legend-title"></h3></div>
    <div id="layer-search-container">
      <input type="text" id="layer-search" placeholder="Search layers...">
      <div id="layer-search-dropdown"></div>
    </div>
    <div id="overlay-search-container">
      <input type="text" id="overlay-search" placeholder="Search overlays...">
      <div id="overlay-search-dropdown"></div>
    </div>
    <div id="overlay-list"></div>
  </div>
  <div id="menu-resizer"></div>
  <div id="map" class="map">
    <h2 id="map-title"></h2>
    Loading... You need Javascript...Cargando necesitas Javascript...Carregant...necessites Javascript
  </div>
</div>
  <div id="menu-resizer"></div>
  <div id="map" class="map">
    <h2 id="map-title"></h2>
    Loading... You need Javascript...Cargando necesitas Javascript...Carregant...necessites Javascript
  </div>
</div>
<script>
(function(){
  var resizer = document.getElementById('menu-resizer');
  var menu = document.getElementById('menu');
  var startX, startWidth;
  resizer.addEventListener('mousedown', function(e) {
    startX = e.clientX;
    startWidth = menu.offsetWidth;
    document.body.style.cursor = 'ew-resize';
    document.addEventListener('mousemove', resizeMenu);
    document.addEventListener('mouseup', stopResize);
  });
  function resizeMenu(e) {
    var newWidth = Math.min(Math.max(startWidth + (e.clientX - startX), 200), 600);
    menu.style.width = newWidth + 'px';
  }
  function stopResize() {
    document.body.style.cursor = '';
    document.removeEventListener('mousemove', resizeMenu);
    document.removeEventListener('mouseup', stopResize);
  }
})();
</script>
<style>
.flex-row {
  display: flex;
  flex-direction: row;
  width: 100vw;
  height: 100vh;
  overflow: hidden;
}
#menu {
  min-width: 200px;
  max-width: 600px;
  width: 320px;
  resize: none;
  transition: width 0.1s;
  z-index: 2;
  height: 100vh;
  box-sizing: border-box;
}
#menu-resizer {
  width: 6px;
  cursor: ew-resize;
  background: #eee;
  border-left: 1px solid #ccc;
  border-right: 1px solid #ccc;
  z-index: 3;
}
#map {
  flex: 1 1 0%;
  height: 100vh;
  min-width: 0;
  position: relative;
}
</style>
<script>
(function(){
  var resizer = document.getElementById('menu-resizer');
  var menu = document.getElementById('menu');
  var startX, startWidth;
  resizer.addEventListener('mousedown', function(e) {
    startX = e.clientX;
    startWidth = menu.offsetWidth;
    document.body.style.cursor = 'ew-resize';
    document.addEventListener('mousemove', resizeMenu);
    document.addEventListener('mouseup', stopResize);
  });
  function resizeMenu(e) {
    var newWidth = Math.min(Math.max(startWidth + (e.clientX - startX), 200), 600);
    menu.style.width = newWidth + 'px';
  }
  function stopResize() {
    document.body.style.cursor = '';
    document.removeEventListener('mousemove', resizeMenu);
    document.removeEventListener('mouseup', stopResize);
  }
})();
</script>
			<div id="overlay-search-container">
			  <input type="text" id="overlay-search" placeholder="Search overlays...">
			  <div id="overlay-search-dropdown"></div>
			</div>
			<!-- Overlays section -->
			<div id="overlay-list"></div>
		</div>
	</div>
	<script src="src/api/jquery/3.4.1/jquery.min.js" defer=""></script>
	<script src="src/api/jquery-ui-1.12.1.custom/jquery-ui.min.js" defer=""></script>
	<script src="src/api/openlayers/v6.2.2-custom/ol.js" defer=""></script>
	<script src="src/config.js" defer=""></script>
	<script src="src/layer_search.js" defer=""></script>
	<script src="src/overlay_search.js" defer=""></script>
	<script src="src/index.js" defer=""></script>
	<script src="src/nominatim_search.js" defer=""></script>
	<script src="src/panoramax_viewer.js" defer=""></script>
	<script src="src/mapillary_viewer.js" defer=""></script>
	<script src="src/router.js" defer=""></script>
</body>
</html>
